import{r as l,k as e,O as u,T as v,V as _,W as E,Y as L,Z as C}from"./vendor-Cye-Yv4e.js";import{B as d,C as a,a as r,b as i,c as n,d as c}from"./card-Ceez92Pw.js";import{B as o}from"./badge-DFOnridc.js";import{L as b}from"./vendor-router-BYblEMJK.js";import{u as U}from"./index-Uwbr45-t.js";import{USHeatMap as q}from"./USHeatMap-CCde1WJo.js";import"./vendor-ui-DWFxUGAD.js";import"./vendor-maps-EtJUnHl2.js";import"./vendor-charts-B_ZyQ9af.js";const P=()=>{const[s,y]=l.useState(null),[x,h]=l.useState(!0),[j,f]=l.useState(null),{toast:w}=U(),m=async()=>{try{const t=await fetch("/metrics");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const g=await t.json();y(g),f(null)}catch(t){console.error("Error fetching stats:",t),f(t instanceof Error?t.message:"Failed to fetch statistics"),w({title:"Error",description:"Failed to fetch statistics. Please try again.",variant:"destructive"})}finally{h(!1)}};l.useEffect(()=>{m();const t=setInterval(m,3e4);return()=>clearInterval(t)},[]);const p=()=>{h(!0),m()},N=t=>{try{return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(g){return"Unknown"}},S=()=>!s||s.visit_count===0?0:s.ask_count/s.visit_count*100,k=()=>!s||s.unique_visitors===0?0:s.ask_count/s.unique_visitors;return x&&!s?e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"text-lg",children:"Loading statistics..."})]})}):j&&!s?e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-destructive",children:"Error Loading Statistics"}),e.jsx("p",{className:"text-muted-foreground",children:j}),e.jsxs(d,{onClick:p,variant:"outline",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Try Again"]}),e.jsx("div",{className:"mt-4",children:e.jsx(d,{asChild:!0,variant:"ghost",children:e.jsxs(b,{to:"/",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Back to Home"]})})})]})}):e.jsx("div",{className:"min-h-screen bg-background py-12 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center mb-6",children:[e.jsx(d,{asChild:!0,variant:"ghost",className:"mr-4",children:e.jsxs(b,{to:"/",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),e.jsxs(d,{onClick:p,variant:"outline",disabled:x,children:[e.jsx(u,{className:`h-4 w-4 mr-2 ${x?"animate-spin":""}`}),"Refresh"]})]}),e.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-accent to-primary",children:"Statistics"}),e.jsx("p",{className:"text-xl text-muted-foreground mb-4",children:"Veterans Benefits AI Usage Analytics"}),s&&e.jsxs(o,{variant:"secondary",className:"text-sm",children:["Last updated: ",N(s.last_updated)]})]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[e.jsxs(a,{className:"text-center",children:[e.jsxs(r,{className:"pb-3",children:[e.jsxs(i,{className:"flex items-center justify-center space-x-2",children:[e.jsx(_,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{children:"Questions Asked"})]}),e.jsx(n,{children:"Total questions processed by our AI"})]}),e.jsx(c,{children:e.jsx("div",{className:"text-4xl font-bold text-blue-500 mb-2",children:s.ask_count.toLocaleString()})})]}),e.jsxs(a,{className:"text-center",children:[e.jsxs(r,{className:"pb-3",children:[e.jsxs(i,{className:"flex items-center justify-center space-x-2",children:[e.jsx(E,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{children:"Website Visits"})]}),e.jsx(n,{children:"Total page views since launch"})]}),e.jsx(c,{children:e.jsx("div",{className:"text-4xl font-bold text-green-500 mb-2",children:s.visit_count.toLocaleString()})})]}),e.jsxs(a,{className:"text-center",children:[e.jsxs(r,{className:"pb-3",children:[e.jsxs(i,{className:"flex items-center justify-center space-x-2",children:[e.jsx(L,{className:"h-5 w-5 text-purple-500"}),e.jsx("span",{children:"Unique Visitors"})]}),e.jsx(n,{children:"Different users who visited our site"})]}),e.jsx(c,{children:e.jsx("div",{className:"text-4xl font-bold text-purple-500 mb-2",children:s.unique_visitors.toLocaleString()})})]}),e.jsxs(a,{className:"text-center",children:[e.jsxs(r,{className:"pb-3",children:[e.jsxs(i,{className:"flex items-center justify-center space-x-2",children:[e.jsx(C,{className:"h-5 w-5 text-orange-500"}),e.jsx("span",{children:"Engagement Rate"})]}),e.jsx(n,{children:"Percentage of visits that asked questions"})]}),e.jsx(c,{children:e.jsxs("div",{className:"text-4xl font-bold text-orange-500 mb-2",children:[S().toFixed(1),"%"]})})]})]}),e.jsx("div",{className:"mb-12",children:e.jsx(q,{})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(a,{children:[e.jsxs(r,{children:[e.jsx(i,{children:"Service Information"}),e.jsx(n,{children:"Details about our service performance"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Service Started:"}),e.jsx("span",{className:"text-muted-foreground",children:N(s.first_visit)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Questions per Visit:"}),e.jsx("span",{className:"text-muted-foreground",children:(s.ask_count/Math.max(s.visit_count,1)).toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Questions per Unique User:"}),e.jsx("span",{className:"text-muted-foreground",children:k().toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Return Visitor Rate:"}),e.jsxs("span",{className:"text-muted-foreground",children:[s.unique_visitors>0?((1-s.unique_visitors/s.visit_count)*100).toFixed(1):0,"%"]})]})]})]}),e.jsxs(a,{children:[e.jsxs(r,{children:[e.jsx(i,{children:"Real-time Updates"}),e.jsx(n,{children:"Live statistics and system status"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx(o,{variant:"default",className:"bg-green-500",children:"Live"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Auto-refresh:"}),e.jsx(o,{variant:"secondary",children:"Every 30 seconds"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Data Persistence:"}),e.jsx(o,{variant:"outline",children:"Across Restarts"})]}),e.jsx("div",{className:"text-sm text-muted-foreground pt-2",children:"Statistics are updated in real-time and persist across server restarts. All data is stored securely and anonymously."})]})]})]}),e.jsx("div",{className:"text-center mt-12 text-muted-foreground",children:e.jsx("p",{children:"Veterans Benefits AI - Trusted data, free forever"})})]})]})})};export{P as default};
