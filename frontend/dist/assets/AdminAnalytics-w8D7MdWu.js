const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/USHeatMap-CCde1WJo.js","assets/vendor-Cye-Yv4e.js","assets/vendor-maps-EtJUnHl2.js","assets/vendor-charts-B_ZyQ9af.js","assets/card-Ceez92Pw.js","assets/vendor-ui-DWFxUGAD.js","assets/index-Uwbr45-t.js","assets/vendor-router-BYblEMJK.js","assets/index-C4ySSpzT.css","assets/badge-DFOnridc.js"])))=>i.map(i=>d[i]);
import{c as f,_ as Z,u as W}from"./index-Uwbr45-t.js";import{r as h,k as e,T as U,O as D,W as E,Y as X,V as F,Z as T,_ as J,N as H,a0 as ee,a1 as q,a2 as B,a3 as V}from"./vendor-Cye-Yv4e.js";import{B as _,C as n,a as i,b as l,d as c,c as u}from"./card-Ceez92Pw.js";import{B as p}from"./badge-DFOnridc.js";import{L as Q,g as O,h as $,i as se}from"./vendor-ui-DWFxUGAD.js";import{u as te,L as P}from"./vendor-router-BYblEMJK.js";const ae=se,G=h.forwardRef(({className:d,...s},o)=>e.jsx(Q,{ref:o,className:f("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",d),...s}));G.displayName=Q.displayName;const b=h.forwardRef(({className:d,...s},o)=>e.jsx(O,{ref:o,className:f("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",d),...s}));b.displayName=O.displayName;const w=h.forwardRef(({className:d,...s},o)=>e.jsx($,{ref:o,className:f("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",d),...s}));w.displayName=$.displayName;const N=h.forwardRef(({className:d,...s},o)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:o,className:f("w-full caption-bottom text-sm",d),...s})}));N.displayName="Table";const v=h.forwardRef(({className:d,...s},o)=>e.jsx("thead",{ref:o,className:f("[&_tr]:border-b",d),...s}));v.displayName="TableHeader";const y=h.forwardRef(({className:d,...s},o)=>e.jsx("tbody",{ref:o,className:f("[&_tr:last-child]:border-0",d),...s}));y.displayName="TableBody";const re=h.forwardRef(({className:d,...s},o)=>e.jsx("tfoot",{ref:o,className:f("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",d),...s}));re.displayName="TableFooter";const m=h.forwardRef(({className:d,...s},o)=>e.jsx("tr",{ref:o,className:f("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",d),...s}));m.displayName="TableRow";const r=h.forwardRef(({className:d,...s},o)=>e.jsx("th",{ref:o,className:f("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",d),...s}));r.displayName="TableHead";const a=h.forwardRef(({className:d,...s},o)=>e.jsx("td",{ref:o,className:f("p-4 align-middle [&:has([role=checkbox])]:pr-0",d),...s}));a.displayName="TableCell";const ne=h.forwardRef(({className:d,...s},o)=>e.jsx("caption",{ref:o,className:f("mt-4 text-sm text-muted-foreground",d),...s}));ne.displayName="TableCaption";const ie=h.lazy(()=>Z(()=>import("./USHeatMap-CCde1WJo.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),he=()=>{const[d]=te(),[s,o]=h.useState(null),[A,R]=h.useState(!0),[M,C]=h.useState(null),[g,z]=h.useState(30),{toast:K}=W(),k=d.get("token"),Y=!!k,L=async()=>{if(!k){C("Admin token required"),R(!1);return}try{const t=await fetch(`/api/analytics/stats?days=${g}`,{headers:{"X-Admin-Token":k}});if(!t.ok)throw t.status===401?new Error("Invalid admin token"):new Error(`HTTP error! status: ${t.status}`);const j=await t.json();o(j),C(null)}catch(t){console.error("Error fetching analytics:",t),C(t instanceof Error?t.message:"Failed to fetch analytics"),K({title:"Error",description:"Failed to fetch analytics data. Please check your admin token.",variant:"destructive"})}finally{R(!1)}};h.useEffect(()=>{L();const t=setInterval(L,6e4);return()=>clearInterval(t)},[g,k]);const I=()=>{R(!0),L()},S=t=>{if(!t)return"Unknown";try{return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(j){return"Unknown"}},x=t=>new Intl.NumberFormat().format(t||0);return Y?A&&!s?e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"text-lg",children:"Loading analytics..."})]})}):M&&!s?e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-destructive",children:"Error Loading Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:M}),e.jsxs(_,{onClick:I,variant:"outline",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Try Again"]}),e.jsx("div",{className:"mt-4",children:e.jsx(_,{asChild:!0,variant:"ghost",children:e.jsxs(P,{to:"/",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Back to Home"]})})})]})}):e.jsx("div",{className:"min-h-screen bg-background py-8 px-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(_,{asChild:!0,variant:"ghost",children:e.jsxs(P,{to:"/",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Home"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-accent to-primary",children:"ðŸ“Š Admin Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive site analytics and insights"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:g,onChange:t=>z(Number(t.target.value)),className:"px-3 py-2 border rounded-md bg-background",children:[e.jsx("option",{value:7,children:"Last 7 days"}),e.jsx("option",{value:30,children:"Last 30 days"}),e.jsx("option",{value:90,children:"Last 90 days"}),e.jsx("option",{value:365,children:"Last year"})]}),e.jsxs(_,{onClick:I,variant:"outline",disabled:A,children:[e.jsx(D,{className:`h-4 w-4 mr-2 ${A?"animate-spin":""}`}),"Refresh"]}),e.jsx(p,{variant:"secondary",children:"Admin Access"})]})]}),s&&e.jsxs(ae,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(G,{className:"grid w-full grid-cols-5",children:[e.jsx(b,{value:"overview",children:"Overview"}),e.jsx(b,{value:"locations",children:"Locations"}),e.jsx(b,{value:"traffic",children:"Traffic"}),e.jsx(b,{value:"tokens",children:"Tokens"}),e.jsx(b,{value:"performance",children:"Performance"}),e.jsx(b,{value:"timeline",children:"Timeline"})]}),e.jsxs(w,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total Pageviews"}),e.jsx(E,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:x(s.totals.pageviews)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All-time page views"})]})]}),e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Unique Visitors"}),e.jsx(X,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:x(s.totals.uniques)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Individual users tracked"})]})]}),e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Chat Questions"}),e.jsx(F,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x(s.totals.chat_questions)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"AI questions processed"})]})]}),e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Engagement Rate"}),e.jsx(T,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[s.service_info.engagement_rate.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Questions per visit"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsx(l,{children:"Service Performance"}),e.jsx(u,{children:"Key performance indicators"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Questions per User:"}),e.jsx(p,{variant:"outline",children:s.service_info.questions_per_user.toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Total Locations Tracked:"}),e.jsx(p,{variant:"outline",children:x(s.visitor_locations.total_tracked)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Service Started:"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:S(s.service_info.first_visit)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Last Updated:"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:S(s.service_info.last_updated)})]})]})]}),e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsx(l,{children:"Geographic Distribution"}),e.jsx(u,{children:"Visitor location breakdown"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"US States:"}),e.jsxs(p,{variant:"default",children:[Object.keys(s.visitor_locations.us_states).length," states"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"International:"}),e.jsxs(p,{variant:"secondary",children:[x(s.visitor_locations.international)," visitors"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Local/Development:"}),e.jsxs(p,{variant:"outline",children:[x(s.visitor_locations.local)," visits"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Unknown Location:"}),e.jsxs(p,{variant:"outline",children:[x(s.visitor_locations.unknown)," visits"]})]})]})]})]})]}),e.jsx(w,{value:"locations",className:"space-y-6",children:e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(J,{className:"h-5 w-5"}),e.jsx("span",{children:"Visitor Locations Heat Map"})]}),e.jsx(u,{children:"Geographic distribution of website visitors across the United States"})]}),e.jsx(c,{children:e.jsx(h.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading map..."})}),children:e.jsx(ie,{})})})]})}),e.jsx(w,{value:"traffic",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(H,{className:"h-5 w-5"}),e.jsx("span",{children:"Top Pages"})]}),e.jsxs(u,{children:["Most visited pages (last ",g," days)"]})]}),e.jsx(c,{children:e.jsxs(N,{children:[e.jsx(v,{children:e.jsxs(m,{children:[e.jsx(r,{children:"Page"}),e.jsx(r,{className:"text-right",children:"Views"})]})}),e.jsx(y,{children:s.top_pages.length===0?e.jsx(m,{children:e.jsx(a,{colSpan:2,className:"text-center text-muted-foreground",children:"No page data available"})}):s.top_pages.map((t,j)=>e.jsxs(m,{children:[e.jsx(a,{className:"font-medium",children:t.path||"(homepage)"}),e.jsx(a,{className:"text-right",children:x(t.pageviews)})]},j))})]})})]}),e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(ee,{className:"h-5 w-5"}),e.jsx("span",{children:"Top Referrers"})]}),e.jsxs(u,{children:["Traffic sources (last ",g," days)"]})]}),e.jsx(c,{children:e.jsxs(N,{children:[e.jsx(v,{children:e.jsxs(m,{children:[e.jsx(r,{children:"Referrer"}),e.jsx(r,{className:"text-right",children:"Visits"})]})}),e.jsx(y,{children:s.top_referrers.length===0?e.jsx(m,{children:e.jsx(a,{colSpan:2,className:"text-center text-muted-foreground",children:"No referrer data available"})}):s.top_referrers.map((t,j)=>e.jsxs(m,{children:[e.jsx(a,{className:"font-medium",children:t.referrer==="(direct)"?"Direct Traffic":t.referrer}),e.jsx(a,{className:"text-right",children:x(t.visits)})]},j))})]})})]})]})}),e.jsx(w,{value:"tokens",className:"space-y-6",children:s.token_usage.available?e.jsxs(e.Fragment,{children:[s.token_usage.summary&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total Tokens"}),e.jsx(q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:x(s.token_usage.summary.total_tokens)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Over ",s.token_usage.summary.queries_with_tokens," queries"]})]})]}),e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Avg per Query"}),e.jsx(B,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Math.round(s.token_usage.summary.avg_tokens_per_query||0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tokens per question"})]})]}),e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Prompt Tokens"}),e.jsx(F,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:x(s.token_usage.summary.total_prompt_tokens)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Input processing"})]})]}),e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Completion Tokens"}),e.jsx(E,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:x(s.token_usage.summary.total_completion_tokens)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Response generation"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.token_usage.model_breakdown&&s.token_usage.model_breakdown.length>0&&e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(B,{className:"h-5 w-5"}),e.jsx("span",{children:"Model Usage"})]}),e.jsx(u,{children:"Token consumption by AI model"})]}),e.jsx(c,{children:e.jsxs(N,{children:[e.jsx(v,{children:e.jsxs(m,{children:[e.jsx(r,{children:"Model"}),e.jsx(r,{children:"Provider"}),e.jsx(r,{className:"text-right",children:"Uses"}),e.jsx(r,{className:"text-right",children:"Total Tokens"}),e.jsx(r,{className:"text-right",children:"Avg"})]})}),e.jsx(y,{children:s.token_usage.model_breakdown.map((t,j)=>e.jsxs(m,{children:[e.jsx(a,{className:"font-medium",children:t.model_used||"Unknown"}),e.jsx(a,{children:e.jsx(p,{variant:"outline",children:t.api_provider||"Unknown"})}),e.jsx(a,{className:"text-right",children:x(t.usage_count)}),e.jsx(a,{className:"text-right",children:x(t.total_tokens||0)}),e.jsx(a,{className:"text-right",children:Math.round(t.avg_tokens||0)})]},j))})]})})]}),s.token_usage.daily_usage&&s.token_usage.daily_usage.length>0&&e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(V,{className:"h-5 w-5"}),e.jsx("span",{children:"Daily Token Usage"})]}),e.jsxs(u,{children:["Token consumption over time (last ",g," days)"]})]}),e.jsx(c,{children:e.jsxs(N,{children:[e.jsx(v,{children:e.jsxs(m,{children:[e.jsx(r,{children:"Date"}),e.jsx(r,{className:"text-right",children:"Queries"}),e.jsx(r,{className:"text-right",children:"Total Tokens"}),e.jsx(r,{className:"text-right",children:"Avg"})]})}),e.jsx(y,{children:s.token_usage.daily_usage.slice(0,10).map((t,j)=>e.jsxs(m,{children:[e.jsx(a,{className:"font-medium",children:new Date(t.day).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsx(a,{className:"text-right",children:x(t.queries)}),e.jsx(a,{className:"text-right",children:x(t.daily_tokens)}),e.jsx(a,{className:"text-right",children:Math.round(t.avg_tokens||0)})]},j))})]})})]})]}),s.token_usage.summary&&e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsx(l,{children:"Token Usage Insights"}),e.jsx(u,{children:"AI resource consumption analysis"})]}),e.jsx(c,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:s.token_usage.summary.unique_models}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"AI Models Used"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:s.token_usage.summary.unique_providers}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"API Providers"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary",children:[(s.token_usage.summary.total_completion_tokens/Math.max(s.token_usage.summary.total_tokens,1)*100).toFixed(1),"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Response Ratio"})]})]})})]})]}):e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(q,{className:"h-5 w-5"}),e.jsx("span",{children:"Token Usage Tracking"})]}),e.jsx(u,{children:"AI token consumption analytics"})]}),e.jsx(c,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(q,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-lg font-medium text-muted-foreground mb-2",children:"Token Tracking Not Available"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.token_usage.message||s.token_usage.error||"Token usage tracking is being set up. Check back shortly."})]})})]})}),e.jsx(w,{value:"performance",className:"space-y-6",children:s.performance?s.performance.available?e.jsxs(e.Fragment,{children:[s.performance.summary&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Avg Response Time"}),e.jsx(T,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(s.performance.summary.avg_ms||0)," ms"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Average over last ",g," days"]})]})]}),e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"p95 Response Time"}),e.jsx(T,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[Math.round(s.performance.summary.p95_ms||0)," ms"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"95th percentile"})]})]}),e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Success Rate"}),e.jsx(T,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[((s.performance.summary.success_rate||0)*100).toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Successful responses"})]})]}),e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Avg Answer Size"}),e.jsx(H,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[Math.round(s.performance.summary.avg_answer_chars||0)," chars"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Response length"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.performance.by_provider&&s.performance.by_provider.length>0&&e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsx(l,{children:"Performance by Provider"}),e.jsx(u,{children:"Comparative performance metrics"})]}),e.jsx(c,{children:e.jsxs(N,{children:[e.jsx(v,{children:e.jsxs(m,{children:[e.jsx(r,{children:"Provider"}),e.jsx(r,{className:"text-right",children:"Avg ms"}),e.jsx(r,{className:"text-right",children:"p95 ms"}),e.jsx(r,{className:"text-right",children:"Success"}),e.jsx(r,{className:"text-right",children:"Queries"})]})}),e.jsx(y,{children:s.performance.by_provider.map((t,j)=>e.jsxs(m,{children:[e.jsx(a,{className:"font-medium",children:t.provider}),e.jsx(a,{className:"text-right",children:Math.round(t.avg_ms||0)}),e.jsx(a,{className:"text-right",children:Math.round(t.p95_ms||0)}),e.jsxs(a,{className:"text-right",children:[((t.success_rate||0)*100).toFixed(1),"%"]}),e.jsx(a,{className:"text-right",children:t.queries})]},j))})]})})]}),s.performance.daily&&s.performance.daily.length>0&&e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsx(l,{children:"Daily Performance"}),e.jsx(u,{children:"Average and p95 response times"})]}),e.jsx(c,{children:e.jsxs(N,{children:[e.jsx(v,{children:e.jsxs(m,{children:[e.jsx(r,{children:"Date"}),e.jsx(r,{className:"text-right",children:"Avg ms"}),e.jsx(r,{className:"text-right",children:"p95 ms"}),e.jsx(r,{className:"text-right",children:"Queries"})]})}),e.jsx(y,{children:s.performance.daily.slice(0,10).map((t,j)=>e.jsxs(m,{children:[e.jsx(a,{className:"font-medium",children:new Date(t.day).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsx(a,{className:"text-right",children:Math.round(t.avg_ms||0)}),e.jsx(a,{className:"text-right",children:Math.round(t.p95_ms||0)}),e.jsx(a,{className:"text-right",children:t.queries})]},j))})]})})]})]})]}):e.jsx(n,{children:e.jsxs(i,{children:[e.jsx(l,{children:"Performance Analytics"}),e.jsx(u,{children:s.performance.message||s.performance.error||"Performance data not yet available."})]})}):null}),e.jsx(w,{value:"timeline",className:"space-y-6",children:e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(V,{className:"h-5 w-5"}),e.jsx("span",{children:"Daily Activity Timeline"})]}),e.jsxs(u,{children:["Daily breakdown of pageviews, unique visitors, and chat questions (last ",g," days)"]})]}),e.jsx(c,{children:e.jsxs(N,{children:[e.jsx(v,{children:e.jsxs(m,{children:[e.jsx(r,{children:"Date"}),e.jsx(r,{className:"text-right",children:"Pageviews"}),e.jsx(r,{className:"text-right",children:"Unique Visitors"}),e.jsx(r,{className:"text-right",children:"Chat Questions"})]})}),e.jsx(y,{children:s.by_day.length===0?e.jsx(m,{children:e.jsx(a,{colSpan:4,className:"text-center text-muted-foreground",children:"No daily data available for the selected period"})}):s.by_day.map((t,j)=>e.jsxs(m,{children:[e.jsx(a,{className:"font-medium",children:new Date(t.day).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),e.jsx(a,{className:"text-right",children:x(t.pageviews)}),e.jsx(a,{className:"text-right",children:x(t.uniques)}),e.jsx(a,{className:"text-right",children:x(t.chat_questions)})]},j))})]})})]})})]}),e.jsxs("div",{className:"text-center mt-12 text-muted-foreground",children:[e.jsx("p",{children:"Veterans Benefits AI - Admin Analytics Dashboard"}),e.jsxs("p",{className:"text-sm mt-1",children:["Data refreshes automatically every minute â€¢ Last updated: ",s!=null&&s.service_info.last_updated?S(s.service_info.last_updated):"Unknown"]})]})]})}):e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[e.jsx("h1",{className:"text-3xl font-bold text-destructive",children:"ðŸ”’ Admin Access Required"}),e.jsx("p",{className:"text-muted-foreground",children:"This page requires a valid admin token. Please contact the administrator for access."}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Access URL format: ",e.jsx("code",{children:"/admin/analytics?token=YOUR_TOKEN"})]}),e.jsx("div",{className:"mt-6",children:e.jsx(_,{asChild:!0,variant:"outline",children:e.jsxs(P,{to:"/",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Back to Home"]})})})]})})};export{he as default};
