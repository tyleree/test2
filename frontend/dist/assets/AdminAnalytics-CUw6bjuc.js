import{r as m,k as e,a0 as J,a1 as ce,V,T as z,N as B,a2 as de,a3 as ee,a4 as E,_ as I,a5 as X,a6 as $,Y as G,Z as xe,W as Y,a7 as oe,a8 as me,a9 as M,aa as se,ab as he,ac as K,ad as te,ae as je}from"./vendor-CeGOeTdi.js";import{C as l,a as n,b as i,c as N,d as c,B as w}from"./card-CZAeUnZe.js";import{B as j,U as ue}from"./USHeatMap-CNxyZIuF.js";import{L as ae,g as le,h as ne,i as fe}from"./vendor-ui-Do7SHgJT.js";import{c as _,u as Z}from"./index-OvNHokhV.js";import{u as ge,L as O}from"./vendor-router-50qA8ksp.js";import"./vendor-maps-CxHWCEP1.js";import"./vendor-charts-B_ZyQ9af.js";const Ne=fe,ie=m.forwardRef(({className:a,...s},o)=>e.jsx(ae,{ref:o,className:_("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...s}));ie.displayName=ae.displayName;const R=m.forwardRef(({className:a,...s},o)=>e.jsx(le,{ref:o,className:_("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...s}));R.displayName=le.displayName;const S=m.forwardRef(({className:a,...s},o)=>e.jsx(ne,{ref:o,className:_("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s}));S.displayName=ne.displayName;const T=m.forwardRef(({className:a,...s},o)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:o,className:_("w-full caption-bottom text-sm",a),...s})}));T.displayName="Table";const C=m.forwardRef(({className:a,...s},o)=>e.jsx("thead",{ref:o,className:_("[&_tr]:border-b",a),...s}));C.displayName="TableHeader";const A=m.forwardRef(({className:a,...s},o)=>e.jsx("tbody",{ref:o,className:_("[&_tr:last-child]:border-0",a),...s}));A.displayName="TableBody";const pe=m.forwardRef(({className:a,...s},o)=>e.jsx("tfoot",{ref:o,className:_("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s}));pe.displayName="TableFooter";const u=m.forwardRef(({className:a,...s},o)=>e.jsx("tr",{ref:o,className:_("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s}));u.displayName="TableRow";const d=m.forwardRef(({className:a,...s},o)=>e.jsx("th",{ref:o,className:_("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s}));d.displayName="TableHead";const r=m.forwardRef(({className:a,...s},o)=>e.jsx("td",{ref:o,className:_("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s}));r.displayName="TableCell";const ve=m.forwardRef(({className:a,...s},o)=>e.jsx("caption",{ref:o,className:_("mt-4 text-sm text-muted-foreground",a),...s}));ve.displayName="TableCaption";const be=()=>{var D,h,t,f,W;const[a,s]=m.useState(null),[o,L]=m.useState(!0),[p,b]=m.useState("all"),[g,v]=m.useState(null),{toast:y}=Z(),P=async x=>{try{L(!0);const q=new URLSearchParams({limit:"50",offset:"0"});x&&x!=="all"&&q.append("cache_mode",x);const F=await fetch(`/api/analytics/timeline?${q}`,{headers:{"X-Admin-Token":"flip_ruby"}});if(!F.ok)throw new Error("Failed to fetch timeline");const re=await F.json();s(re)}catch(q){console.error("Timeline fetch error:",q),y({title:"Error",description:"Failed to load timeline data",variant:"destructive"})}finally{L(!1)}};m.useEffect(()=>{P(p==="all"?void 0:p)},[p]);const U=x=>{switch(x){case"exact_hit":return e.jsx(K,{className:"h-4 w-4 text-green-600"});case"semantic_hit":return e.jsx(K,{className:"h-4 w-4 text-blue-600"});case"miss":return e.jsx(te,{className:"h-4 w-4 text-red-600"});default:return e.jsx(je,{className:"h-4 w-4 text-gray-600"})}},Q=x=>{switch(x){case"exact_hit":return e.jsx(j,{variant:"default",className:"bg-green-100 text-green-800",children:"Exact Hit"});case"semantic_hit":return e.jsx(j,{variant:"default",className:"bg-blue-100 text-blue-800",children:"Semantic Hit"});case"miss":return e.jsx(j,{variant:"destructive",children:"Cache Miss"});default:return e.jsx(j,{variant:"secondary",children:"Unknown"})}},H=x=>new Date(x).toLocaleString(),k=x=>(x==null?void 0:x.toLocaleString())||"0";return o?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(z,{className:"h-6 w-6 animate-spin mr-2"}),"Loading timeline..."]}):e.jsxs("div",{className:"space-y-6",children:[(a==null?void 0:a.stats)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Questions"}),e.jsx(Y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.stats.total_questions}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 24 hours"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Cache Hit Rate"}),e.jsx(E,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[((D=a.stats.cache_hit_rate)==null?void 0:D.toFixed(1))||0,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(a.stats.exact_hits||0)+(a.stats.semantic_hits||0)," hits"]})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Avg Latency"}),e.jsx(se,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(a.stats.avg_latency||0),"ms"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Response time"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Tokens Used"}),e.jsx(he,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:k(a.stats.total_tokens_used)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total consumption"})]})]})]}),e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsx(i,{children:"Question Timeline"}),e.jsx(N,{children:"Comprehensive view of all questions, cache performance, and token usage"})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx(w,{variant:p==="all"?"default":"outline",size:"sm",onClick:()=>b("all"),children:"All Questions"}),e.jsx(w,{variant:p==="exact_hit"?"default":"outline",size:"sm",onClick:()=>b("exact_hit"),children:"Exact Hits"}),e.jsx(w,{variant:p==="semantic_hit"?"default":"outline",size:"sm",onClick:()=>b("semantic_hit"),children:"Semantic Hits"}),e.jsx(w,{variant:p==="miss"?"default":"outline",size:"sm",onClick:()=>b("miss"),children:"Cache Misses"})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(T,{children:[e.jsx(C,{children:e.jsxs(u,{children:[e.jsx(d,{children:"Timestamp"}),e.jsx(d,{children:"Question"}),e.jsx(d,{children:"Cache Mode"}),e.jsx(d,{children:"Similarity"}),e.jsx(d,{children:"Latency"}),e.jsx(d,{children:"Tokens"}),e.jsx(d,{children:"Citations"}),e.jsx(d,{children:"Actions"})]})}),e.jsx(A,{children:(h=a==null?void 0:a.entries)==null?void 0:h.map(x=>{var q,F;return e.jsxs(u,{children:[e.jsx(r,{className:"text-sm",children:H(x.timestamp)}),e.jsxs(r,{className:"max-w-md",children:[e.jsx("div",{className:"truncate",title:x.question,children:x.question}),x.answer_preview&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1 truncate",children:x.answer_preview})]}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[U(x.cache_mode),Q(x.cache_mode)]})}),e.jsx(r,{children:x.semantic_similarity?e.jsxs(j,{variant:"outline",children:[(x.semantic_similarity*100).toFixed(1),"%"]}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(r,{children:e.jsxs(j,{variant:"outline",className:"text-xs",children:[x.latency_ms,"ms"]})}),e.jsx(r,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:k(((q=x.token_usage)==null?void 0:q.total_tokens)||0)}),((F=x.token_usage)==null?void 0:F.tokens_big)&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Big: ",k(x.token_usage.tokens_big)]})]})}),e.jsx(r,{children:e.jsx(j,{variant:"outline",children:x.citations_count})}),e.jsx(r,{children:e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>v(x),children:e.jsx(G,{className:"h-4 w-4"})})})]},x.id)})})]})}),(!(a!=null&&a.entries)||a.entries.length===0)&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No questions found for the selected filter."})]})]}),g&&e.jsxs(l,{className:"mt-4",children:[e.jsxs(n,{children:[e.jsx(i,{children:"Question Details"}),e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>v(null),className:"absolute top-4 right-4",children:"✕"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-medium",children:"Question:"}),e.jsx("p",{className:"mt-1",children:g.question})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-medium",children:"Answer Preview:"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:g.answer_preview})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-medium",children:"Cache Mode:"}),e.jsx("div",{className:"mt-1",children:Q(g.cache_mode)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-medium",children:"Latency:"}),e.jsxs("p",{className:"mt-1",children:[g.latency_ms,"ms"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-medium",children:"Token Usage:"}),e.jsxs("div",{className:"mt-1 text-sm space-y-1",children:[e.jsxs("div",{children:["Total: ",k(((t=g.token_usage)==null?void 0:t.total_tokens)||0)]}),((f=g.token_usage)==null?void 0:f.tokens_big)&&e.jsxs("div",{children:["Big Model: ",k(g.token_usage.tokens_big)]}),((W=g.token_usage)==null?void 0:W.tokens_small)&&e.jsxs("div",{children:["Small Model: ",k(g.token_usage.tokens_small)]})]})]})]})]})]})},ye=({adminToken:a})=>{const[s,o]=m.useState(null),[L,p]=m.useState(!0),{toast:b}=Z(),g=async()=>{try{const y=await fetch("/cache/metrics",{headers:a?{"X-Admin-Token":a}:{}});if(y.ok){const P=await y.json();o(P)}}catch(y){console.error("Failed to fetch cache metrics:",y)}finally{p(!1)}},v=async()=>{if(!a){b({title:"Error",description:"Admin token required",variant:"destructive"});return}try{(await fetch("/cache/clear",{method:"POST",headers:{"X-Admin-Token":a}})).ok?(b({title:"Success",description:"Cache cleared successfully"}),g()):b({title:"Error",description:"Failed to clear cache",variant:"destructive"})}catch(y){b({title:"Error",description:"Failed to clear cache",variant:"destructive"})}};return m.useEffect(()=>{g();const y=setInterval(g,3e4);return()=>clearInterval(y)},[]),L?e.jsx(S,{value:"cache",className:"space-y-6",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(z,{className:"h-6 w-6 animate-spin mr-2"}),"Loading cache metrics..."]})}):e.jsxs(S,{value:"cache",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Cache Hit Rate"}),e.jsx(E,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:(s==null?void 0:s.hit_rate)||"0%"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(s==null?void 0:s.total_hits)||0," total hits"]})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Exact Hits"}),e.jsx(K,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(s==null?void 0:s.exact_hits)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(s==null?void 0:s.exact_misses)||0," misses"]})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Semantic Hits"}),e.jsx(ee,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(s==null?void 0:s.semantic_hits)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(s==null?void 0:s.semantic_misses)||0," misses"]})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Database Hits"}),e.jsx(X,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:(s==null?void 0:s.db_hits)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(s==null?void 0:s.db_writes)||0," writes, ",(s==null?void 0:s.db_errors)||0," errors"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center space-x-2",children:[e.jsx(X,{className:"h-5 w-5"}),e.jsx("span",{children:"Cache Storage"})]}),e.jsx(N,{children:"Memory and database cache utilization"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Memory Cache (L1)"}),e.jsxs(j,{variant:"outline",children:[(s==null?void 0:s.memory_cache_size)||0," / ",(s==null?void 0:s.max_memory_entries)||1e3," entries"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${Math.min(((s==null?void 0:s.memory_cache_size)||0)/((s==null?void 0:s.max_memory_entries)||1e3)*100,100)}%`}})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Semantic Entries"}),e.jsxs(j,{variant:"outline",children:[(s==null?void 0:s.semantic_cache_size)||0," entries"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all",style:{width:`${Math.min(((s==null?void 0:s.semantic_cache_size)||0)/((s==null?void 0:s.max_memory_entries)||1e3)*100,100)}%`}})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Database Cache (L2)"}),e.jsx(j,{variant:s!=null&&s.database_available?"default":"secondary",children:s!=null&&s.database_available?`${(s==null?void 0:s.database_cache_size)||0} entries`:"Unavailable"})]}),(s==null?void 0:s.database_available)&&e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all",style:{width:`${Math.min(((s==null?void 0:s.database_cache_size)||0)/((s==null?void 0:s.max_db_entries)||1e4)*100,100)}%`}})})]})]})]}),e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center space-x-2",children:[e.jsx(se,{className:"h-5 w-5"}),e.jsx("span",{children:"Cache Configuration"})]}),e.jsx(N,{children:"Current cache settings and actions"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"TTL (Time to Live)"}),e.jsxs(j,{variant:"outline",children:[(s==null?void 0:s.ttl_hours)||24," hours"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Max Memory Entries"}),e.jsx(j,{variant:"outline",children:(s==null?void 0:s.max_memory_entries)||1e3})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Max Database Entries"}),e.jsx(j,{variant:"outline",children:(s==null?void 0:s.max_db_entries)||1e4})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Database Available"}),e.jsx(j,{variant:s!=null&&s.database_available?"default":"destructive",children:s!=null&&s.database_available?"Yes":"No"})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs(w,{variant:"destructive",className:"w-full",onClick:v,children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Clear All Caches"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"This will clear both memory and database caches"})]})]})]})]}),e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsx(i,{children:"Cache Performance Insights"}),e.jsx(N,{children:"Understanding your cache efficiency"})]}),e.jsx(c,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:(s==null?void 0:s.exact_hits)||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Exact Query Matches"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Fastest response time"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:(s==null?void 0:s.semantic_hits)||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Semantic Matches"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Similar question detection"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:(s==null?void 0:s.db_hits)||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Database Cache Hits"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Persisted responses"})]})]})})]})]})},Re=()=>{const[a]=ge(),[s,o]=m.useState(null),[L,p]=m.useState(!0),[b,g]=m.useState(null),[v,y]=m.useState(30),{toast:P}=Z(),U=a.get("token"),Q=!!U,H=async()=>{if(!U){g("Admin token required"),p(!1);return}try{const t=await fetch(`/api/analytics/stats?days=${v}`,{headers:{"X-Admin-Token":U}});if(!t.ok)throw t.status===401?new Error("Invalid admin token"):new Error(`HTTP error! status: ${t.status}`);const f=await t.json();o(f),g(null)}catch(t){console.error("Error fetching analytics:",t),g(t instanceof Error?t.message:"Failed to fetch analytics"),P({title:"Error",description:"Failed to fetch analytics data. Please check your admin token.",variant:"destructive"})}finally{p(!1)}};m.useEffect(()=>{H();const t=setInterval(H,6e4);return()=>clearInterval(t)},[v,U]);const k=()=>{p(!0),H()},D=t=>{if(!t)return"Unknown";try{return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(f){return"Unknown"}},h=t=>new Intl.NumberFormat().format(t||0);return Q?L&&!s?e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"text-lg",children:"Loading analytics..."})]})}):b&&!s?e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-destructive",children:"Error Loading Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:b}),e.jsxs(w,{onClick:k,variant:"outline",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Try Again"]}),e.jsx("div",{className:"mt-4",children:e.jsx(w,{asChild:!0,variant:"ghost",children:e.jsxs(O,{to:"/",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Back to Home"]})})})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900",children:[e.jsx("div",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex h-16 items-center justify-between px-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(w,{asChild:!0,variant:"ghost",size:"sm",children:e.jsxs(O,{to:"/",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Home"]})}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 pl-4 border-l",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center",children:e.jsx(B,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold",children:"Admin Analytics"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Veterans Benefits AI"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:v,onChange:t=>y(Number(t.target.value)),className:"h-9 px-3 text-sm border rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-ring",children:[e.jsx("option",{value:7,children:"Last 7 days"}),e.jsx("option",{value:30,children:"Last 30 days"}),e.jsx("option",{value:90,children:"Last 90 days"}),e.jsx("option",{value:365,children:"Last year"})]}),e.jsx(w,{onClick:k,variant:"outline",size:"sm",disabled:L,children:e.jsx(z,{className:`h-4 w-4 ${L?"animate-spin":""}`})}),e.jsxs(j,{className:"bg-gradient-to-r from-amber-500 to-orange-600 text-white border-0",children:[e.jsx(J,{className:"h-3 w-3 mr-1"}),"Admin"]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[s&&e.jsxs(Ne,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(ie,{className:"grid w-full grid-cols-7 h-12",children:[e.jsxs(R,{value:"overview",className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Overview"})]}),e.jsxs(R,{value:"locations",className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Locations"})]}),e.jsxs(R,{value:"traffic",className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Traffic"})]}),e.jsxs(R,{value:"tokens",className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Tokens"})]}),e.jsxs(R,{value:"performance",className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Performance"})]}),e.jsxs(R,{value:"cache",className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Cache"})]}),e.jsxs(R,{value:"timeline",className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Timeline"})]})]}),e.jsxs(S,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Pageviews"}),e.jsx(G,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:h(s.totals.pageviews)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All-time page views"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Unique Visitors"}),e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:h(s.totals.uniques)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Individual users tracked"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Chat Questions"}),e.jsx(Y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h(s.totals.chat_questions)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"AI questions processed"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Engagement Rate"}),e.jsx(I,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[s.service_info.engagement_rate.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Questions per visit"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsx(i,{children:"Service Performance"}),e.jsx(N,{children:"Key performance indicators"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Questions per User:"}),e.jsx(j,{variant:"outline",children:s.service_info.questions_per_user.toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Total Locations Tracked:"}),e.jsx(j,{variant:"outline",children:h(s.visitor_locations.total_tracked)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Service Started:"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:D(s.service_info.first_visit)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Last Updated:"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:D(s.service_info.last_updated)})]})]})]}),e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsx(i,{children:"Geographic Distribution"}),e.jsx(N,{children:"Visitor location breakdown"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"US States:"}),e.jsxs(j,{variant:"default",children:[Object.keys(s.visitor_locations.us_states).length," states"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"International:"}),e.jsxs(j,{variant:"secondary",children:[h(s.visitor_locations.international)," visitors"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Local/Development:"}),e.jsxs(j,{variant:"outline",children:[h(s.visitor_locations.local)," visits"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Unknown Location:"}),e.jsxs(j,{variant:"outline",children:[h(s.visitor_locations.unknown)," visits"]})]})]})]})]})]}),e.jsx(S,{value:"locations",className:"space-y-6",children:e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"h-5 w-5"}),e.jsx("span",{children:"Visitor Locations Heat Map"})]}),e.jsx(N,{children:"Geographic distribution of website visitors across the United States"})]}),e.jsx(c,{children:e.jsx(m.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading map..."})}),children:e.jsx(ue,{})})})]})}),e.jsx(S,{value:"traffic",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center space-x-2",children:[e.jsx(B,{className:"h-5 w-5"}),e.jsx("span",{children:"Top Pages"})]}),e.jsxs(N,{children:["Most visited pages (last ",v," days)"]})]}),e.jsx(c,{children:e.jsxs(T,{children:[e.jsx(C,{children:e.jsxs(u,{children:[e.jsx(d,{children:"Page"}),e.jsx(d,{className:"text-right",children:"Views"})]})}),e.jsx(A,{children:s.top_pages.length===0?e.jsx(u,{children:e.jsx(r,{colSpan:2,className:"text-center text-muted-foreground",children:"No page data available"})}):s.top_pages.map((t,f)=>e.jsxs(u,{children:[e.jsx(r,{className:"font-medium",children:t.path||"(homepage)"}),e.jsx(r,{className:"text-right",children:h(t.pageviews)})]},f))})]})})]}),e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center space-x-2",children:[e.jsx(me,{className:"h-5 w-5"}),e.jsx("span",{children:"Top Referrers"})]}),e.jsxs(N,{children:["Traffic sources (last ",v," days)"]})]}),e.jsx(c,{children:e.jsxs(T,{children:[e.jsx(C,{children:e.jsxs(u,{children:[e.jsx(d,{children:"Referrer"}),e.jsx(d,{className:"text-right",children:"Visits"})]})}),e.jsx(A,{children:s.top_referrers.length===0?e.jsx(u,{children:e.jsx(r,{colSpan:2,className:"text-center text-muted-foreground",children:"No referrer data available"})}):s.top_referrers.map((t,f)=>e.jsxs(u,{children:[e.jsx(r,{className:"font-medium",children:t.referrer==="(direct)"?"Direct Traffic":t.referrer}),e.jsx(r,{className:"text-right",children:h(t.visits)})]},f))})]})})]})]})}),e.jsx(S,{value:"tokens",className:"space-y-6",children:s.token_usage.available?e.jsxs(e.Fragment,{children:[s.token_usage.summary&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Tokens"}),e.jsx(E,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:h(s.token_usage.summary.total_tokens)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Over ",s.token_usage.summary.queries_with_tokens," queries"]})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Avg per Query"}),e.jsx(M,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Math.round(s.token_usage.summary.avg_tokens_per_query||0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tokens per question"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Prompt Tokens"}),e.jsx(Y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:h(s.token_usage.summary.total_prompt_tokens)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Input processing"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Completion Tokens"}),e.jsx(G,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:h(s.token_usage.summary.total_completion_tokens)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Response generation"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.token_usage.model_breakdown&&s.token_usage.model_breakdown.length>0&&e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center space-x-2",children:[e.jsx(M,{className:"h-5 w-5"}),e.jsx("span",{children:"Model Usage"})]}),e.jsx(N,{children:"Token consumption by AI model"})]}),e.jsx(c,{children:e.jsxs(T,{children:[e.jsx(C,{children:e.jsxs(u,{children:[e.jsx(d,{children:"Model"}),e.jsx(d,{children:"Provider"}),e.jsx(d,{className:"text-right",children:"Uses"}),e.jsx(d,{className:"text-right",children:"Total Tokens"}),e.jsx(d,{className:"text-right",children:"Avg"})]})}),e.jsx(A,{children:s.token_usage.model_breakdown.map((t,f)=>e.jsxs(u,{children:[e.jsx(r,{className:"font-medium",children:t.model_used||"Unknown"}),e.jsx(r,{children:e.jsx(j,{variant:"outline",children:t.api_provider||"Unknown"})}),e.jsx(r,{className:"text-right",children:h(t.usage_count)}),e.jsx(r,{className:"text-right",children:h(t.total_tokens||0)}),e.jsx(r,{className:"text-right",children:Math.round(t.avg_tokens||0)})]},f))})]})})]}),s.token_usage.daily_usage&&s.token_usage.daily_usage.length>0&&e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center space-x-2",children:[e.jsx($,{className:"h-5 w-5"}),e.jsx("span",{children:"Daily Token Usage"})]}),e.jsxs(N,{children:["Token consumption over time (last ",v," days)"]})]}),e.jsx(c,{children:e.jsxs(T,{children:[e.jsx(C,{children:e.jsxs(u,{children:[e.jsx(d,{children:"Date"}),e.jsx(d,{className:"text-right",children:"Queries"}),e.jsx(d,{className:"text-right",children:"Total Tokens"}),e.jsx(d,{className:"text-right",children:"Avg"})]})}),e.jsx(A,{children:s.token_usage.daily_usage.slice(0,10).map((t,f)=>e.jsxs(u,{children:[e.jsx(r,{className:"font-medium",children:new Date(t.day).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsx(r,{className:"text-right",children:h(t.queries)}),e.jsx(r,{className:"text-right",children:h(t.daily_tokens)}),e.jsx(r,{className:"text-right",children:Math.round(t.avg_tokens||0)})]},f))})]})})]})]}),s.token_usage.summary&&e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsx(i,{children:"Token Usage Insights"}),e.jsx(N,{children:"AI resource consumption analysis"})]}),e.jsx(c,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:s.token_usage.summary.unique_models}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"AI Models Used"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:s.token_usage.summary.unique_providers}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"API Providers"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary",children:[(s.token_usage.summary.total_completion_tokens/Math.max(s.token_usage.summary.total_tokens,1)*100).toFixed(1),"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Response Ratio"})]})]})})]})]}):e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-5 w-5"}),e.jsx("span",{children:"Token Usage Tracking"})]}),e.jsx(N,{children:"AI token consumption analytics"})]}),e.jsx(c,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(E,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-lg font-medium text-muted-foreground mb-2",children:"Token Tracking Not Available"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.token_usage.message||s.token_usage.error||"Token usage tracking is being set up. Check back shortly."})]})})]})}),e.jsx(S,{value:"performance",className:"space-y-6",children:s.performance?s.performance.available?e.jsxs(e.Fragment,{children:[s.performance.summary&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Avg Response Time"}),e.jsx(I,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(s.performance.summary.avg_ms||0)," ms"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Average over last ",v," days"]})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"p95 Response Time"}),e.jsx(I,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[Math.round(s.performance.summary.p95_ms||0)," ms"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"95th percentile"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Success Rate"}),e.jsx(I,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[((s.performance.summary.success_rate||0)*100).toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Successful responses"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Avg Answer Size"}),e.jsx(B,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[Math.round(s.performance.summary.avg_answer_chars||0)," chars"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Response length"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.performance.by_provider&&s.performance.by_provider.length>0&&e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsx(i,{children:"Performance by Provider"}),e.jsx(N,{children:"Comparative performance metrics"})]}),e.jsx(c,{children:e.jsxs(T,{children:[e.jsx(C,{children:e.jsxs(u,{children:[e.jsx(d,{children:"Provider"}),e.jsx(d,{className:"text-right",children:"Avg ms"}),e.jsx(d,{className:"text-right",children:"p95 ms"}),e.jsx(d,{className:"text-right",children:"Success"}),e.jsx(d,{className:"text-right",children:"Queries"})]})}),e.jsx(A,{children:s.performance.by_provider.map((t,f)=>e.jsxs(u,{children:[e.jsx(r,{className:"font-medium",children:t.provider}),e.jsx(r,{className:"text-right",children:Math.round(t.avg_ms||0)}),e.jsx(r,{className:"text-right",children:Math.round(t.p95_ms||0)}),e.jsxs(r,{className:"text-right",children:[((t.success_rate||0)*100).toFixed(1),"%"]}),e.jsx(r,{className:"text-right",children:t.queries})]},f))})]})})]}),s.performance.daily&&s.performance.daily.length>0&&e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsx(i,{children:"Daily Performance"}),e.jsx(N,{children:"Average and p95 response times"})]}),e.jsx(c,{children:e.jsxs(T,{children:[e.jsx(C,{children:e.jsxs(u,{children:[e.jsx(d,{children:"Date"}),e.jsx(d,{className:"text-right",children:"Avg ms"}),e.jsx(d,{className:"text-right",children:"p95 ms"}),e.jsx(d,{className:"text-right",children:"Queries"})]})}),e.jsx(A,{children:s.performance.daily.slice(0,10).map((t,f)=>e.jsxs(u,{children:[e.jsx(r,{className:"font-medium",children:new Date(t.day).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsx(r,{className:"text-right",children:Math.round(t.avg_ms||0)}),e.jsx(r,{className:"text-right",children:Math.round(t.p95_ms||0)}),e.jsx(r,{className:"text-right",children:t.queries})]},f))})]})})]})]})]}):e.jsx(l,{children:e.jsxs(n,{children:[e.jsx(i,{children:"Performance Analytics"}),e.jsx(N,{children:s.performance.message||s.performance.error||"Performance data not yet available."})]})}):null}),e.jsx(ye,{adminToken:U}),e.jsxs(S,{value:"timeline",className:"space-y-6",children:[e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center space-x-2",children:[e.jsx($,{className:"h-5 w-5"}),e.jsx("span",{children:"Daily Activity Timeline"})]}),e.jsxs(N,{children:["Daily breakdown of pageviews, unique visitors, and chat questions (last ",v," days)"]})]}),e.jsx(c,{children:e.jsxs(T,{children:[e.jsx(C,{children:e.jsxs(u,{children:[e.jsx(d,{children:"Date"}),e.jsx(d,{className:"text-right",children:"Pageviews"}),e.jsx(d,{className:"text-right",children:"Unique Visitors"}),e.jsx(d,{className:"text-right",children:"Chat Questions"})]})}),e.jsx(A,{children:s.by_day.length===0?e.jsx(u,{children:e.jsx(r,{colSpan:4,className:"text-center text-muted-foreground",children:"No daily data available for the selected period"})}):s.by_day.map((t,f)=>e.jsxs(u,{children:[e.jsx(r,{className:"font-medium",children:new Date(t.day).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),e.jsx(r,{className:"text-right",children:h(t.pageviews)}),e.jsx(r,{className:"text-right",children:h(t.uniques)}),e.jsx(r,{className:"text-right",children:h(t.chat_questions)})]},f))})]})})]}),e.jsx(be,{})]})]}),e.jsxs("div",{className:"text-center mt-12 text-muted-foreground",children:[e.jsx("p",{children:"Veterans Benefits AI - Admin Analytics Dashboard"}),e.jsxs("p",{className:"text-sm mt-1",children:["Data refreshes automatically every minute • Last updated: ",s!=null&&s.service_info.last_updated?D(s.service_info.last_updated):"Unknown"]})]})]})]}):e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:e.jsxs(l,{className:"w-full max-w-md mx-4 border-slate-700 bg-slate-800/50 backdrop-blur",children:[e.jsxs(n,{className:"text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-br from-amber-500 to-orange-600 rounded-full flex items-center justify-center",children:e.jsx(J,{className:"h-8 w-8 text-white"})}),e.jsx(i,{className:"text-2xl text-white",children:"Admin Access Required"}),e.jsx(N,{className:"text-slate-400",children:"This dashboard requires authentication to access sensitive analytics data."})]}),e.jsxs(c,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{children:"Access URL format:"})]}),e.jsx("code",{className:"block p-3 bg-slate-900/50 rounded-lg text-amber-400 text-sm font-mono",children:"/admin/analytics?token=YOUR_TOKEN"})]}),e.jsx("div",{className:"pt-4 border-t border-slate-700",children:e.jsx(w,{asChild:!0,variant:"outline",className:"w-full border-slate-600 hover:bg-slate-700",children:e.jsxs(O,{to:"/",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Back to Home"]})})})]})]})})};export{Re as default};
